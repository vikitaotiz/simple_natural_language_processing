{"version":3,"file":"compromise-numbers.js","sources":["../src/find.js","../src/convert/toNumber/findModifiers.js","../src/convert/toNumber/data.js","../src/convert/toNumber/validate.js","../src/convert/toNumber/parseDecimals.js","../src/convert/toNumber/parseNumeric.js","../src/convert/toNumber/index.js","../src/parse.js","../src/_agreeUnits.js","../src/convert/_toString.js","../src/convert/toText/index.js","../src/convert/toOrdinal/numOrdinal.js","../src/convert/toOrdinal/textOrdinal.js","../src/convert/_symbols.js","../src/convert/makeNumber.js","../src/methods.js","../src/tagger.js","../src/tags.js","../src/index.js"],"sourcesContent":["const tens = 'twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|fourty'\nconst teens = 'eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen'\n\n// this is a bit of a mess\nconst findNumbers = function(doc, n) {\n  let match = doc.match('#Value+')\n\n  //\"50 83\"\n  if (match.has('#NumericValue #NumericValue')) {\n    //a comma may mean two numbers\n    if (match.has('#Value @hasComma #Value')) {\n      match.splitAfter('@hasComma')\n    } else {\n      match = match.splitAfter('#NumericValue')\n    }\n  }\n  //three-length\n  if (match.has('#Value #Value #Value') && !match.has('#Multiple')) {\n    //twenty-five-twenty\n    if (match.has('(' + tens + ') #Cardinal #Cardinal')) {\n      match = match.splitAfter('(' + tens + ') #Cardinal')\n    }\n  }\n\n  //two-length ones\n  if (match.has('#Value #Value')) {\n    //june 21st 1992 is two seperate values\n    if (match.has('#NumericValue #NumericValue')) {\n      match = match.splitOn('#Year')\n    }\n    //sixty fifteen\n    if (match.has('(' + tens + ') (' + teens + ')')) {\n      match = match.splitAfter('(' + tens + ')')\n    }\n    //\"72 82\"\n    let double = match.match('#Cardinal #Cardinal')\n    if (double.found && !match.has('(point|decimal)')) {\n      //not 'two hundred'\n      if (!double.has('#Cardinal (#Multiple|point|decimal)')) {\n        //one proper way, 'twenty one', or 'hundred one'\n        if (!double.has('(' + tens + ') #Cardinal') && !double.has('#Multiple #Value')) {\n          // double = double.firstTerm()\n          double.terms().forEach(d => {\n            match = match.splitOn(d)\n          })\n        }\n      }\n    }\n    //seventh fifth\n    if (match.match('#Ordinal #Ordinal').match('#TextValue').found && !match.has('#Multiple')) {\n      //the one proper way, 'twenty first'\n      if (!match.has('(' + tens + ') #Ordinal')) {\n        match = match.splitAfter('#Ordinal')\n      }\n    }\n    //fifth five\n    if (match.has('#Ordinal #Cardinal')) {\n      match = match.splitBefore('#Cardinal+')\n    }\n    //five 2017 (support '5 hundred', and 'twenty 5'\n    if (match.has('#TextValue #NumericValue') && !match.has('(' + tens + '|#Multiple)')) {\n      match = match.splitBefore('#NumericValue+')\n    }\n  }\n  //5-8\n  if (match.has('#NumberRange')) {\n    match = match.splitAfter('#NumberRange')\n  }\n  //grab (n)th result\n  if (typeof n === 'number') {\n    match = match.get(n)\n  }\n  return match\n}\nmodule.exports = findNumbers\n","//support global multipliers, like 'half-million' by doing 'million' then multiplying by 0.5\nconst findModifiers = str => {\n  const mults = [\n    {\n      reg: /^(minus|negative)[\\s\\-]/i,\n      mult: -1,\n    },\n    {\n      reg: /^(a\\s)?half[\\s\\-](of\\s)?/i,\n      mult: 0.5,\n    },\n    //  {\n    //   reg: /^(a\\s)?quarter[\\s\\-]/i,\n    //   mult: 0.25\n    // }\n  ]\n  for (let i = 0; i < mults.length; i++) {\n    if (mults[i].reg.test(str) === true) {\n      return {\n        amount: mults[i].mult,\n        str: str.replace(mults[i].reg, ''),\n      }\n    }\n  }\n  return {\n    amount: 1,\n    str: str,\n  }\n}\n\nmodule.exports = findModifiers\n","module.exports = {\n  ones: {\n    zeroth: 0,\n    first: 1,\n    second: 2,\n    third: 3,\n    fourth: 4,\n    fifth: 5,\n    sixth: 6,\n    seventh: 7,\n    eighth: 8,\n    ninth: 9,\n    zero: 0,\n    one: 1,\n    two: 2,\n    three: 3,\n    four: 4,\n    five: 5,\n    six: 6,\n    seven: 7,\n    eight: 8,\n    nine: 9,\n  },\n  teens: {\n    tenth: 10,\n    eleventh: 11,\n    twelfth: 12,\n    thirteenth: 13,\n    fourteenth: 14,\n    fifteenth: 15,\n    sixteenth: 16,\n    seventeenth: 17,\n    eighteenth: 18,\n    nineteenth: 19,\n    ten: 10,\n    eleven: 11,\n    twelve: 12,\n    thirteen: 13,\n    fourteen: 14,\n    fifteen: 15,\n    sixteen: 16,\n    seventeen: 17,\n    eighteen: 18,\n    nineteen: 19,\n  },\n  tens: {\n    twentieth: 20,\n    thirtieth: 30,\n    fortieth: 40,\n    fourtieth: 40,\n    fiftieth: 50,\n    sixtieth: 60,\n    seventieth: 70,\n    eightieth: 80,\n    ninetieth: 90,\n    twenty: 20,\n    thirty: 30,\n    forty: 40,\n    fourty: 40,\n    fifty: 50,\n    sixty: 60,\n    seventy: 70,\n    eighty: 80,\n    ninety: 90,\n  },\n  multiples: {\n    hundredth: 100,\n    thousandth: 1000,\n    millionth: 1e6,\n    billionth: 1e9,\n    trillionth: 1e12,\n    quadrillionth: 1e15,\n    quintillionth: 1e18,\n    sextillionth: 1e21,\n    septillionth: 1e24,\n    hundred: 100,\n    thousand: 1000,\n    million: 1e6,\n    billion: 1e9,\n    trillion: 1e12,\n    quadrillion: 1e15,\n    quintillion: 1e18,\n    sextillion: 1e21,\n    septillion: 1e24,\n    grand: 1000,\n  },\n}\n","const words = require('./data')\n\n//prevent things like 'fifteen ten', and 'five sixty'\nconst isValid = (w, has) => {\n  if (words.ones.hasOwnProperty(w)) {\n    if (has.ones || has.teens) {\n      return false\n    }\n  } else if (words.teens.hasOwnProperty(w)) {\n    if (has.ones || has.teens || has.tens) {\n      return false\n    }\n  } else if (words.tens.hasOwnProperty(w)) {\n    if (has.ones || has.teens || has.tens) {\n      return false\n    }\n  }\n  return true\n}\nmodule.exports = isValid\n","const words = require('./data')\n\n//concatenate into a string with leading '0.'\nconst parseDecimals = function(arr) {\n  let str = '0.'\n  for (let i = 0; i < arr.length; i++) {\n    let w = arr[i]\n    if (words.ones.hasOwnProperty(w) === true) {\n      str += words.ones[w]\n    } else if (words.teens.hasOwnProperty(w) === true) {\n      str += words.teens[w]\n    } else if (words.tens.hasOwnProperty(w) === true) {\n      str += words.tens[w]\n    } else if (/^[0-9]$/.test(w) === true) {\n      str += w\n    } else {\n      return 0\n    }\n  }\n  return parseFloat(str)\n}\n\nmodule.exports = parseDecimals\n","//parse a string like \"4,200.1\" into Number 4200.1\nconst parseNumeric = str => {\n  //remove ordinal - 'th/rd'\n  str = str.replace(/1st$/, '1')\n  str = str.replace(/2nd$/, '2')\n  str = str.replace(/3rd$/, '3')\n  str = str.replace(/([4567890])r?th$/, '$1')\n  //remove prefixes\n  str = str.replace(/^[$€¥£¢]/, '')\n  //remove suffixes\n  str = str.replace(/[%$€¥£¢]$/, '')\n  //remove commas\n  str = str.replace(/,/g, '')\n  //split '5kg' from '5'\n  str = str.replace(/([0-9])([a-z\\u00C0-\\u00FF]{1,2})$/, '$1')\n  return str\n}\n\nmodule.exports = parseNumeric\n","const findModifiers = require('./findModifiers')\nconst words = require('./data')\nconst isValid = require('./validate')\nconst parseDecimals = require('./parseDecimals')\nconst parseNumeric = require('./parseNumeric')\nconst improperFraction = /^([0-9,\\. ]+)\\/([0-9,\\. ]+)$/\n\n//some numbers we know\nconst casualForms = {\n  // 'a few': 3,\n  'a couple': 2,\n  'a dozen': 12,\n  'two dozen': 24,\n  zero: 0,\n}\n\n// a 'section' is something like 'fifty-nine thousand'\n// turn a section into something we can add to - like 59000\nconst section_sum = obj => {\n  return Object.keys(obj).reduce((sum, k) => {\n    sum += obj[k]\n    return sum\n  }, 0)\n}\n\n//turn a string into a number\nconst parse = function(str) {\n  //convert some known-numbers\n  if (casualForms.hasOwnProperty(str) === true) {\n    return casualForms[str]\n  }\n  //'a/an' is 1\n  if (str === 'a' || str === 'an') {\n    return 1\n  }\n  const modifier = findModifiers(str)\n  str = modifier.str\n  let last_mult = null\n  let has = {}\n  let sum = 0\n  let isNegative = false\n  const terms = str.split(/[ -]/)\n  for (let i = 0; i < terms.length; i++) {\n    let w = terms[i]\n    w = parseNumeric(w)\n    if (!w || w === 'and') {\n      continue\n    }\n    if (w === '-' || w === 'negative') {\n      isNegative = true\n      continue\n    }\n    if (w.charAt(0) === '-') {\n      isNegative = true\n      w = w.substr(1)\n    }\n    //decimal mode\n    if (w === 'point') {\n      sum += section_sum(has)\n      sum += parseDecimals(terms.slice(i + 1, terms.length))\n      sum *= modifier.amount\n      return sum\n    }\n    //improper fraction\n    const fm = w.match(improperFraction)\n    if (fm) {\n      const num = parseFloat(fm[1].replace(/[, ]/g, ''))\n      const denom = parseFloat(fm[2].replace(/[, ]/g, ''))\n      if (denom) {\n        sum += num / denom || 0\n      }\n      continue\n    }\n    //prevent mismatched units, like 'seven eleven'\n    if (isValid(w, has) === false) {\n      return null\n    }\n    //buildOut section, collect 'has' values\n    if (/^[0-9\\.]+$/.test(w)) {\n      has['ones'] = parseFloat(w) //not technically right\n    } else if (words.ones.hasOwnProperty(w) === true) {\n      has['ones'] = words.ones[w]\n    } else if (words.teens.hasOwnProperty(w) === true) {\n      has['teens'] = words.teens[w]\n    } else if (words.tens.hasOwnProperty(w) === true) {\n      has['tens'] = words.tens[w]\n    } else if (words.multiples.hasOwnProperty(w) === true) {\n      let mult = words.multiples[w]\n\n      //something has gone wrong : 'two hundred five hundred'\n      if (mult === last_mult) {\n        return null\n      }\n      //support 'hundred thousand'\n      //this one is tricky..\n      if (mult === 100 && terms[i + 1] !== undefined) {\n        // has['hundreds']=\n        const w2 = terms[i + 1]\n        if (words.multiples[w2]) {\n          mult *= words.multiples[w2] //hundredThousand/hundredMillion\n          i += 1\n        }\n      }\n      //natural order of things\n      //five thousand, one hundred..\n      if (last_mult === null || mult < last_mult) {\n        sum += (section_sum(has) || 1) * mult\n        last_mult = mult\n        has = {}\n      } else {\n        //maybe hundred .. thousand\n        sum += section_sum(has)\n        last_mult = mult\n        sum = (sum || 1) * mult\n        has = {}\n      }\n    }\n  }\n  //dump the remaining has values\n  sum += section_sum(has)\n  //post-process add modifier\n  sum *= modifier.amount\n  sum *= isNegative ? -1 : 1\n  //dont return 0, if it went straight-through\n  if (sum === 0 && Object.keys(has).length === 0) {\n    return null\n  }\n  return sum\n}\n\nmodule.exports = parse\n","const toNumber = require('./convert/toNumber')\n\n// get a numeric value from this phrase\nconst parseNumber = function(p) {\n  let str = p.text('reduced')\n  // is it in '3,123' format?\n  let hasComma = /[0-9],[0-9]/.test(p.text('text'))\n  str = str.replace(/,/g, '')\n\n  //parse a numeric-number (easy)\n  let arr = str.split(/^([^0-9]*)([0-9.,]*)([^0-9]*)$/)\n  if (arr && arr[2] && p.terms().length < 2) {\n    let num = parseFloat(arr[2] || str)\n    //ensure that num is an actual number\n    if (typeof num !== 'number') {\n      num = null\n    }\n    // strip an ordinal off the suffix\n    let suffix = arr[3] || ''\n    if (suffix === 'st' || suffix === 'nd' || suffix === 'rd' || suffix === 'th') {\n      suffix = ''\n    }\n    // support M for million, k for thousand\n    if (suffix === 'm' || suffix === 'M') {\n      num *= 1000000\n      suffix = ''\n    }\n    if (suffix === 'k' || suffix === 'k') {\n      num *= 1000\n      suffix = ''\n    }\n    return {\n      hasComma: hasComma,\n      prefix: arr[1] || '',\n      num: num,\n      suffix: suffix,\n    }\n  }\n  //parse a text-numer (harder)\n  let num = toNumber(str)\n  return {\n    hasComma: hasComma,\n    prefix: '',\n    num: num,\n    suffix: '',\n  }\n}\nmodule.exports = parseNumber\n","// handle 'one bottle', 'two bottles'\nconst agreeUnits = function(agree, val, obj) {\n  if (agree === false) {\n    return\n  }\n  let unit = val.lookAhead('^(#Unit|#Noun)')\n  // don't do these\n  if (unit.has('(#Address|#Money|#Percent)') || val.has('#Ordinal')) {\n    return\n  }\n  if (obj.num === 1) {\n    unit.nouns().toSingular()\n  } else if (unit.has('#Singular')) {\n    unit.nouns().toPlural()\n  }\n}\nmodule.exports = agreeUnits\n","/**\n * turn big numbers, like 2.3e+22, into a string with a ton of trailing 0's\n * */\nconst numToString = function(n) {\n  if (n < 1000000) {\n    return String(n)\n  }\n  let str\n  if (typeof n === 'number') {\n    str = n.toFixed(0)\n  } else {\n    str = n\n  }\n  if (str.indexOf('e+') === -1) {\n    return str\n  }\n  return str\n    .replace('.', '')\n    .split('e+')\n    .reduce(function(p, b) {\n      return p + Array(b - p.length + 2).join(0)\n    })\n}\nmodule.exports = numToString\n// console.log(numToString(2.5e+22));\n","const toString = require('../_toString')\n/**\n * turns an integer/float into.ber, like 'fifty-five'\n */\n\nconst tens_mapping = [\n  ['ninety', 90],\n  ['eighty', 80],\n  ['seventy', 70],\n  ['sixty', 60],\n  ['fifty', 50],\n  ['forty', 40],\n  ['thirty', 30],\n  ['twenty', 20],\n]\nconst ones_mapping = [\n  '',\n  'one',\n  'two',\n  'three',\n  'four',\n  'five',\n  'six',\n  'seven',\n  'eight',\n  'nine',\n  'ten',\n  'eleven',\n  'twelve',\n  'thirteen',\n  'fourteen',\n  'fifteen',\n  'sixteen',\n  'seventeen',\n  'eighteen',\n  'nineteen',\n]\n\nconst sequence = [\n  [1e24, 'septillion'],\n  [1e20, 'hundred sextillion'],\n  [1e21, 'sextillion'],\n  [1e20, 'hundred quintillion'],\n  [1e18, 'quintillion'],\n  [1e17, 'hundred quadrillion'],\n  [1e15, 'quadrillion'],\n  [1e14, 'hundred trillion'],\n  [1e12, 'trillion'],\n  [1e11, 'hundred billion'],\n  [1e9, 'billion'],\n  [1e8, 'hundred million'],\n  [1e6, 'million'],\n  [100000, 'hundred thousand'],\n  [1000, 'thousand'],\n  [100, 'hundred'],\n  [1, 'one'],\n]\n\n//turn number into an array of magnitudes, like [[5, million], [2, hundred]]\nconst breakdown_magnitudes = function(num) {\n  let working = num\n  let have = []\n  sequence.forEach(a => {\n    if (num >= a[0]) {\n      let howmany = Math.floor(working / a[0])\n      working -= howmany * a[0]\n      if (howmany) {\n        have.push({\n          unit: a[1],\n          count: howmany,\n        })\n      }\n    }\n  })\n  return have\n}\n\n//turn numbers from 100-0 into their text\nconst breakdown_hundred = function(num) {\n  let arr = []\n  if (num > 100) {\n    return arr //something bad happened..\n  }\n  for (let i = 0; i < tens_mapping.length; i++) {\n    if (num >= tens_mapping[i][1]) {\n      num -= tens_mapping[i][1]\n      arr.push(tens_mapping[i][0])\n    }\n  }\n  //(hopefully) we should only have 20-0 now\n  if (ones_mapping[num]) {\n    arr.push(ones_mapping[num])\n  }\n  return arr\n}\n\n/** print-out 'point eight nine'*/\nconst handle_decimal = num => {\n  const names = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine']\n  let arr = []\n  //parse it out like a string, because js math is such shit\n  let str = toString(num)\n  let decimal = str.match(/\\.([0-9]+)/)\n  if (!decimal || !decimal[0]) {\n    return arr\n  }\n  arr.push('point')\n  let decimals = decimal[0].split('')\n  for (let i = 0; i < decimals.length; i++) {\n    arr.push(names[decimals[i]])\n  }\n  return arr\n}\n\n/** turns an integer into a textual number */\nconst to_text = function(num) {\n  // handle zero, quickly\n  if (num === 0 || num === '0') {\n    return 'zero' // no?\n  }\n  //big numbers, north of sextillion, aren't gonna work well..\n  //keep them small..\n  if (num > 1e21) {\n    num = toString(num)\n  }\n  let arr = []\n  //handle negative numbers\n  if (num < 0) {\n    arr.push('minus')\n    num = Math.abs(num)\n  }\n  //break-down into units, counts\n  let units = breakdown_magnitudes(num)\n  //build-up the string from its components\n  for (let i = 0; i < units.length; i++) {\n    let unit_name = units[i].unit\n    if (unit_name === 'one') {\n      unit_name = ''\n      //put an 'and' in here\n      if (arr.length > 1) {\n        arr.push('and')\n      }\n    }\n    arr = arr.concat(breakdown_hundred(units[i].count))\n    arr.push(unit_name)\n  }\n  //also support decimals - 'point eight'\n  arr = arr.concat(handle_decimal(num))\n  //remove empties\n  arr = arr.filter(s => s)\n  if (arr.length === 0) {\n    arr[0] = ''\n  }\n  return arr.join(' ')\n}\n\nmodule.exports = to_text\n\n// console.log(to_text(-1000.8));\n","const toString = require('../_toString')\n\n/**\n * turn a number like 5 into an ordinal like 5th\n */\nconst numOrdinal = function(num) {\n  if (!num && num !== 0) {\n    return null\n  }\n  //the teens are all 'th'\n  let tens = num % 100\n  if (tens > 10 && tens < 20) {\n    return String(num) + 'th'\n  }\n  //the rest of 'em\n  const mapping = {\n    0: 'th',\n    1: 'st',\n    2: 'nd',\n    3: 'rd',\n  }\n  let str = toString(num)\n  let last = str.slice(str.length - 1, str.length)\n  if (mapping[last]) {\n    str += mapping[last]\n  } else {\n    str += 'th'\n  }\n  return str\n}\n\nmodule.exports = numOrdinal\n","const textValue = require('../toText')\n// const toString = require('../_toString')\n\nconst irregulars = {\n  one: 'first',\n  two: 'second',\n  three: 'third',\n  five: 'fifth',\n  eight: 'eighth',\n  nine: 'ninth',\n  twelve: 'twelfth',\n  twenty: 'twentieth',\n  thirty: 'thirtieth',\n  forty: 'fortieth',\n  fourty: 'fourtieth',\n  fifty: 'fiftieth',\n  sixty: 'sixtieth',\n  seventy: 'seventieth',\n  eighty: 'eightieth',\n  ninety: 'ninetieth',\n}\n\n/**\n * convert a javascript number to 'twentieth' format\n * */\nconst textOrdinal = num => {\n  let words = textValue(num).split(' ')\n  //convert the last number to an ordinal\n  let last = words[words.length - 1]\n  if (irregulars.hasOwnProperty(last)) {\n    words[words.length - 1] = irregulars[last]\n  } else {\n    words[words.length - 1] = last.replace(/y$/, 'i') + 'th'\n  }\n  return words.join(' ')\n}\n\nmodule.exports = textOrdinal\n","const prefixes = {\n  '¢': 'cents',\n  $: 'dollars',\n  '£': 'pounds',\n  '¥': 'yen',\n  '€': 'euros',\n  '₡': 'colón',\n  '฿': 'baht',\n  '₭': 'kip',\n  '₩': 'won',\n  '₹': 'rupees',\n  '₽': 'ruble',\n  '₺': 'liras',\n}\nconst suffixes = {\n  '%': 'percent',\n  s: 'seconds',\n  cm: 'centimetres',\n  km: 'kilometres',\n}\nmodule.exports = {\n  prefixes: prefixes,\n  suffixes: suffixes,\n}\n","const toString = require('./_toString')\nconst toText = require('./toText')\nconst numOrdinal = require('./toOrdinal/numOrdinal')\nconst textOrdinal = require('./toOrdinal/textOrdinal')\nconst symbols = require('./_symbols')\nconst prefixes = symbols.prefixes\nconst suffixes = symbols.suffixes\n\nconst isCurrency = {\n  usd: true,\n  eur: true,\n  jpy: true,\n  gbp: true,\n  cad: true,\n  aud: true,\n  chf: true,\n  cny: true,\n  hkd: true,\n  nzd: true,\n  kr: true,\n  rub: true,\n}\n// convert $ to 'dollars', etc\nconst prefixToText = function(obj) {\n  // turn 5% to 'five percent'\n  if (prefixes.hasOwnProperty(obj.prefix)) {\n    obj.suffix += prefixes[obj.prefix]\n    obj.prefix = ''\n  }\n  //turn 5km to 'five kilometres'\n  if (suffixes.hasOwnProperty(obj.suffix)) {\n    obj.suffix = suffixes[obj.suffix]\n  }\n  //uppercase lost case for 'USD', etc\n  if (isCurrency.hasOwnProperty(obj.suffix)) {\n    obj.suffix = obj.suffix.toUpperCase()\n  }\n  // add a space, if it exists\n  if (obj.suffix) {\n    obj.suffix = ' ' + obj.suffix\n  }\n  return obj\n}\n\n//business-logic for converting a cardinal-number to other forms\nconst makeNumber = function(obj, isText, isOrdinal) {\n  let num = String(obj.num)\n  if (isText) {\n    obj = prefixToText(obj)\n    if (isOrdinal) {\n      //ordinal-text\n      num = textOrdinal(num)\n      return `${obj.prefix || ''}${num}${obj.suffix || ''}`\n    }\n    //cardinal-text\n    num = toText(num)\n    return `${obj.prefix || ''}${num}${obj.suffix || ''}`\n  }\n  //ordinal-number\n  if (isOrdinal) {\n    num = numOrdinal(num)\n    // support '5th percent'\n    obj = prefixToText(obj)\n    return `${obj.prefix || ''}${num}${obj.suffix || ''}`\n  }\n  // support comma format\n  if (obj.hasComma === true) {\n    num = obj.num.toLocaleString()\n  }\n  // cardinal-number\n  num = toString(num) // support very large numbers\n  return `${obj.prefix || ''}${num}${obj.suffix || ''}`\n}\nmodule.exports = makeNumber\n","const parseNumber = require('./parse')\nconst agreeUnits = require('./_agreeUnits')\nconst makeNumber = require('./convert/makeNumber')\nconst toNumber = require('./convert/toNumber')\n\nlet methods = {\n  /** overloaded json method with additional number information */\n  json: function(options) {\n    let n = null\n    if (typeof options === 'number') {\n      n = options\n      options = null\n    }\n    options = options || { text: true, normal: true, trim: true, terms: true }\n    let res = []\n    this.forEach(doc => {\n      let json = doc.json(options)[0]\n      let obj = parseNumber(doc)\n      json.prefix = obj.prefix\n      json.number = obj.num\n      json.suffix = obj.suffix\n      json.cardinal = makeNumber(obj, false, false)\n      json.ordinal = makeNumber(obj, false, true)\n      json.textCardinal = makeNumber(obj, true, false)\n      json.textOrdinal = makeNumber(obj, true, true)\n      res.push(json)\n    })\n    if (n !== null) {\n      return res[n]\n    }\n    return res\n  },\n  /** two of what? */\n  units: function() {\n    return this.lookAhead('^(#Unit|#Noun)')\n  },\n  /** return only ordinal numbers */\n  isOrdinal: function() {\n    return this.if('#Ordinal')\n  },\n  /** return only cardinal numbers*/\n  isCardinal: function() {\n    return this.if('#Cardinal')\n  },\n  /** convert to numeric form like '8' or '8th' */\n  toNumber: function() {\n    this.forEach(val => {\n      let obj = parseNumber(val)\n      if (obj.num === null) {\n        return\n      }\n      let str = makeNumber(obj, false, val.has('#Ordinal'))\n      val.replaceWith(str, true)\n      val.tag('NumericValue')\n    })\n    return this\n  },\n  /** add commas, or nicer formatting for numbers */\n  toLocaleString: function() {\n    this.forEach(val => {\n      let obj = parseNumber(val)\n      if (obj.num === null) {\n        return\n      }\n      obj.num = obj.num.toLocaleString()\n      let str = makeNumber(obj, false, val.has('#Ordinal'))\n      val.replaceWith(str, true)\n    })\n    return this\n  },\n  /** convert to text form - like 'eight' or 'eigth'*/\n  toText: function() {\n    this.forEach(val => {\n      let obj = parseNumber(val)\n      if (obj.num === null) {\n        return\n      }\n      let str = makeNumber(obj, true, val.has('#Ordinal'))\n      val.replaceWith(str, true)\n      val.tag('TextValue')\n    })\n    return this\n  },\n  /** convert to cardinal form, like 'eight', or '8' */\n  toCardinal: function(agree) {\n    let m = this.if('#Ordinal')\n    m.forEach(val => {\n      let obj = parseNumber(val)\n      if (obj.num === null) {\n        return\n      }\n      let str = makeNumber(obj, val.has('#TextValue'), false)\n      val.replaceWith(str, true)\n      val.tag('Cardinal')\n      // turn unit into plural -> 'seven beers'\n      agreeUnits(agree, val, obj)\n    })\n    return this\n  },\n  /** convert to ordinal form, like 'eighth', or '8th' */\n  toOrdinal: function() {\n    let m = this.if('#Cardinal')\n    m.forEach(val => {\n      let obj = parseNumber(val)\n      if (obj.num === null) {\n        return\n      }\n      let str = makeNumber(obj, val.has('#TextValue'), true)\n      val.replaceWith(str, true)\n      val.tag('Ordinal')\n      // turn unit into singular -> 'seventh beer'\n      let unit = this.lookAhead('^#Plural')\n      if (unit.found) {\n        unit.nouns().toSingular()\n      }\n    })\n    return this\n  },\n  /** return only numbers that are == n */\n  isEqual: function(n) {\n    return this.filter(val => {\n      let num = parseNumber(val).num\n      return num === n\n    })\n  },\n  /** return only numbers that are > n*/\n  greaterThan: function(n) {\n    return this.filter(val => {\n      let num = parseNumber(val).num\n      return num > n\n    })\n  },\n  /** return only numbers that are < n*/\n  lessThan: function(n) {\n    return this.filter(val => {\n      let num = parseNumber(val).num\n      return num < n\n    })\n  },\n  /** return only numbers > min and < max */\n  between: function(min, max) {\n    return this.filter(val => {\n      let num = parseNumber(val).num\n      return num > min && num < max\n    })\n  },\n  /** set these number to n */\n  set: function(n, agree) {\n    if (n === undefined) {\n      return this // don't bother\n    }\n    if (typeof n === 'string') {\n      n = toNumber(n)\n    }\n    this.forEach(val => {\n      let obj = parseNumber(val)\n      obj.num = n\n      if (obj.num === null) {\n        return\n      }\n      let str = makeNumber(obj, val.has('#TextValue'), val.has('#Ordinal'))\n      val.replaceWith(str, true)\n      // handle plural/singular unit\n      agreeUnits(agree, val, obj)\n    })\n    return this\n  },\n  add: function(n, agree) {\n    if (!n) {\n      return this // don't bother\n    }\n    if (typeof n === 'string') {\n      n = toNumber(n)\n    }\n    this.forEach(val => {\n      let obj = parseNumber(val)\n\n      if (obj.num === null) {\n        return\n      }\n      obj.num += n\n      let str = makeNumber(obj, val.has('#TextValue'), val.has('#Ordinal'))\n      val.replaceWith(str, true)\n      // handle plural/singular unit\n      agreeUnits(agree, val, obj)\n    })\n    return this\n  },\n  /** decrease each number by n*/\n  subtract: function(n, agree) {\n    return this.add(n * -1, agree)\n  },\n  /** increase each number by 1 */\n  increment: function(agree) {\n    this.add(1, agree)\n    return this\n  },\n  /** decrease each number by 1 */\n  decrement: function(agree) {\n    this.add(-1, agree)\n    return this\n  },\n\n  /// ----\n\n  /** return things like 1/3rd */\n  fractions: function(n) {\n    let m = this.match('#Fraction')\n    if (typeof n === 'number') {\n      m = m.get(n)\n    }\n    return m\n  },\n\n  /** return things like CCXX*/\n  romanNumerals: function(n) {\n    let m = this.match('#RomanNumeral').numbers()\n    if (typeof n === 'number') {\n      m = m.get(n)\n    }\n    return m\n  },\n\n  /** return things like $4.50*/\n  money: function(n) {\n    let m = this.splitOn('@hasComma')\n    m = m.match('#Money+ #Currency?')\n    m = m.numbers()\n    if (typeof n === 'number') {\n      m = m.get(n)\n    }\n    return m\n  },\n}\n// aliases\nmethods.toNice = methods.toLocaleString\nmethods.isBetween = methods.between\nmethods.minus = methods.subtract\nmethods.plus = methods.add\nmethods.equals = methods.isEqual\n\nmodule.exports = methods\n","const multiples =\n  '(hundred|thousand|million|billion|trillion|quadrillion|quintillion|sextillion|septillion)'\n\n// improved tagging for numbers\nconst tagger = function(doc) {\n  doc.match(multiples).tag('#Multiple')\n  //  in the 400s\n  doc.match('the [/[0-9]+s$/]').tag('#Plural')\n  //half a million\n  doc.match('half a? #Value').tag('Value', 'half-a-value') //(quarter not ready)\n  //five and a half\n  doc.match('#Value and a (half|quarter)').tag('Value', 'value-and-a-half')\n  //one hundred and seven dollars\n  doc.match('#Money and #Money #Currency?').tag('Money', 'money-and-money')\n}\nmodule.exports = tagger\n","module.exports = {\n  Fraction: {\n    isA: 'Value',\n  },\n  Multiple: {\n    isA: 'Value',\n  },\n}\n","const findNumbers = require('./find')\nconst methods = require('./methods')\nconst tagger = require('./tagger')\nconst tags = require('./tags')\n\n/** adds .numbers() method */\nconst addMethod = function(Doc, world) {\n  // add tags to our tagset\n  world.addTags(tags)\n\n  // additional tagging before running the number-parser\n  world.postProcess(tagger)\n\n  /** a list of number values, and their units */\n  class Numbers extends Doc {}\n  //aliases\n  Object.assign(Numbers.prototype, methods)\n\n  /** find all numbers and values */\n  Doc.prototype.numbers = function(n) {\n    let match = findNumbers(this, n)\n    return new Numbers(match.list, this, this.world)\n  }\n  // alias for reverse-compatibility\n  Doc.prototype.values = Doc.prototype.numbers\n  return Doc\n}\nmodule.exports = addMethod\n"],"names":["tens","teens","findNumbers","doc","n","match","has","splitAfter","splitOn","double","found","terms","forEach","d","splitBefore","get","findModifiers","str","mults","reg","mult","i","length","test","amount","replace","ones","zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","zero","one","two","three","four","five","six","seven","eight","nine","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twentieth","thirtieth","fortieth","fourtieth","fiftieth","sixtieth","seventieth","eightieth","ninetieth","twenty","thirty","forty","fourty","fifty","sixty","seventy","eighty","ninety","multiples","hundredth","thousandth","millionth","billionth","trillionth","quadrillionth","quintillionth","sextillionth","septillionth","hundred","thousand","million","billion","trillion","quadrillion","quintillion","sextillion","septillion","grand","isValid","w","words","hasOwnProperty","parseDecimals","arr","parseFloat","parseNumeric","improperFraction","casualForms","section_sum","obj","Object","keys","reduce","sum","k","parse","modifier","last_mult","isNegative","split","charAt","substr","slice","fm","num","denom","undefined","w2","parseNumber","p","text","hasComma","suffix","prefix","toNumber","agreeUnits","agree","val","unit","lookAhead","nouns","toSingular","toPlural","numToString","String","toFixed","indexOf","b","Array","join","tens_mapping","ones_mapping","sequence","breakdown_magnitudes","working","have","a","howmany","Math","floor","push","count","breakdown_hundred","handle_decimal","names","toString","decimal","decimals","to_text","abs","units","unit_name","concat","filter","s","numOrdinal","mapping","last","irregulars","textOrdinal","textValue","prefixes","$","suffixes","cm","km","symbols","isCurrency","usd","eur","jpy","gbp","cad","aud","chf","cny","hkd","nzd","kr","rub","prefixToText","toUpperCase","makeNumber","isText","isOrdinal","toText","toLocaleString","methods","json","options","normal","trim","res","number","cardinal","ordinal","textCardinal","isCardinal","replaceWith","tag","toCardinal","m","toOrdinal","isEqual","greaterThan","lessThan","between","min","max","set","add","subtract","increment","decrement","fractions","romanNumerals","numbers","money","toNice","isBetween","minus","plus","equals","tagger","Fraction","isA","Multiple","addMethod","Doc","world","addTags","tags","postProcess","Numbers","assign","prototype","list","values"],"mappings":"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"}